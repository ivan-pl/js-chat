(()=>{"use strict";function e(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var t="function"==typeof Symbol&&Symbol.observable||"@@observable",n=function(){return Math.random().toString(36).substring(7).split("").join(".")},r={INIT:"@@redux/INIT"+n(),REPLACE:"@@redux/REPLACE"+n(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+n()}};function o(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}const s={messageHistory:[],newMessages:[]};async function a(e){const t=e.target;t.querySelector("#send-message").disabled=!0,e.preventDefault();const n=document.getElementById("message-author")?.value;if(!n)return void alert("You should enter your name");const r=document.getElementById("message-entry-area")?.value;if(!r)return void alert("You should enter a message");const o={name:n,message:r};await async function(e){return fetch("https://otus-js-chat-4ed79-default-rtdb.firebaseio.com/messages.json",{method:"POST",body:JSON.stringify({...e,date:new Date}),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((e=>e.json()))}(o).then((()=>{alert("Message was sent")})).catch((e=>{alert(`Oooops! Something happened. ${e.toString()}`)})),function(e){e.querySelector("#send-message").disabled=!1,e.querySelector("#message-author").value="",e.querySelector("#message-entry-area").value=""}(t)}!function n(s,a,d){var i;if("function"==typeof a&&"function"==typeof d||"function"==typeof d&&"function"==typeof arguments[3])throw new Error(e(0));if("function"==typeof a&&void 0===d&&(d=a,a=void 0),void 0!==d){if("function"!=typeof d)throw new Error(e(1));return d(n)(s,a)}if("function"!=typeof s)throw new Error(e(2));var c=s,u=a,f=[],l=f,m=!1;function p(){l===f&&(l=f.slice())}function g(){if(m)throw new Error(e(3));return u}function y(t){if("function"!=typeof t)throw new Error(e(4));if(m)throw new Error(e(5));var n=!0;return p(),l.push(t),function(){if(n){if(m)throw new Error(e(6));n=!1,p();var r=l.indexOf(t);l.splice(r,1),f=null}}}function h(t){if(!o(t))throw new Error(e(7));if(void 0===t.type)throw new Error(e(8));if(m)throw new Error(e(9));try{m=!0,u=c(u,t)}finally{m=!1}for(var n=f=l,r=0;r<n.length;r++)(0,n[r])();return t}function E(t){if("function"!=typeof t)throw new Error(e(10));c=t,h({type:r.REPLACE})}function w(){var n,r=y;return(n={subscribe:function(t){if("object"!=typeof t||null===t)throw new Error(e(11));function n(){t.next&&t.next(g())}return n(),{unsubscribe:r(n)}}})[t]=function(){return this},n}return h({type:r.INIT}),(i={dispatch:h,subscribe:y,getState:g,replaceReducer:E})[t]=w,i}(((e=s,t)=>{if("RECEIVED_NEW_MESSAGES"===t.type){const{messageHistory:n,newMessages:r}=t.payload;return{...e,messageHistory:n,newMessages:r}}return e}));const d=Array.from({length:15},((e,t)=>({date:new Date,message:`Some messagesaddddddd ddddddddddddddddd ddddddddddddddddddddddddddddd ${t}`,name:`Some nickname ${t}`})));!function(e,t){t.forEach((t=>e.append(function(e){const t=document.createElement("article");t.classList.add("message");const n=document.createElement("div");n.classList.add("message__nickname"),n.innerText=e.name;const r=document.createElement("time");r.classList.add("message__date"),r.innerText=e.date.toLocaleDateString(),r.dateTime=e.date.toString();const o=document.createElement("p");return o.classList.add("message__text"),o.innerText=e.message,[n,r,o].forEach((e=>t.append(e))),t}(t)))),e.scrollTop=e.scrollHeight}(function(e){const t=function(){const e=(e,t)=>{e.id=t,e.classList.add(t)},t=document.createElement("form");e(t,"message-box"),t.addEventListener("submit",a);const n=document.createElement("h1");n.classList.add("title"),n.innerText="Chat";const r=document.createElement("button");r.innerText="Send",e(r,"send-message");const o=document.createElement("section");e(o,"message-history");const s=document.createElement("input");s.setAttribute("type","text"),s.setAttribute("placeholder","Your name"),e(s,"message-author");const d=document.createElement("textarea");d.setAttribute("placeholder","Message text"),e(d,"message-entry-area"),[n,r,o,s,d].forEach((e=>t.append(e)));const i=document.createElement("div");return i.classList.add("app"),i.append(t),i}();return e.append(t),t}(document.body).querySelector("#message-history"),d)})();